{% extends "playlist/base.html" %}

{% load i18n %}
{% load music_tags %}
{% load extra_tagging_tags %}

{% block head_title %}{% trans "Playlist" %}: {{ object }}{% endblock %}

{% block extra_head %}
<meta name="keywords" content="{{ object.tags }}, {{ object.category }}, {{ object.category.parent }}" />
<meta name="description" content="{% trans "You can listen to this playlist online, for free, and legally! check it out and create yours ..." %}" />
{% endblock %}

{% block body %}
<h1>{% trans "Playlist" %} {{ object }}</h1>
<div class="ad_song" style="margin-top:-3px;"><span style="display:none;">{% trans "add tracks" %}</span>

<form method="get" action="{{ request.path }}">
    <input type="text" name="term" value="Search by artist name and / or song name" 
    onfocus="if(this.value=='Search by artist name and / or song name'){this.value='';}" id="term"  style="width:412px;"/>
    <input type="hidden" name="search_artists" value="0" />
    <input type="hidden" name="search_albums" value="0" />
    <input type="submit" class="searched super violet  button bigger" value="{% trans "Search" %}"/>
</form>
<div class="clear"></div>
</div>


{% if tracks %}
<div class="direct_add to_playlist_{{ object.pk }}">
<div class="delete parent" style="float:right"></div>
<h2>{% trans "results matching" %} {{ request.GET.q }}</h2>
<div class="clear"></div>
{% render_tracks tracks object %}
<div class="virtual pagination">
    {% for page in allPages %}
    <a class="page {% if page == currentPage %}selected ui_prevent ui_ignore{% endif %}" href="{{ request.path_info }}?term={{ request.GET.term }}&search_artists=0&search_albums=0&page={{ page }}">{{ page }}</a>
    {% endfor %}
</div>
<div class="clear"></div>
</div>
{% endif %}

<hr style="height:2px; background:#ddd;">
<div class="playlist_track_list">
<span id="playlist_pk" style="display:none">{{ object.pk }}</span>
{% render_tracks user_tracks %}
</div>

{% endblock %}

{# enable right column #}
{% block page_body_right_class %}block{% endblock %}
{% block body_right %}
<h3 class="playcat">{% trans "about" %}</h3>
<div class="details views sidebox">
    <b>{{ object.play_counter }}</b> {% trans "times" %}
</div>
<div class="details count sidebox">
    <b>{{ object.tracks.count }}</b> {% trans "tracks" %}
</div>
<div class="clear"></div>
<div class="ad">
    <div class="lined">
        <b>{% trans 'Published by' %}</b>
        <br />
        <a href="{% url user_details object.creation_user.username %}" style="color: rgb(28, 155, 200);" title="{{ object.creation_user.first_name }}: {% trans "activities on playlistnow.fm" %}">{{ object.creation_user.first_name }}</a>
    </div>

    <div class="lined">
     <div id="playlist-tags">
        {% trans 'Tags' %}:
        <br />
        {% show_tags_for object %}
          </div>
    </div>
    <div class="lined">
        <b>{% trans 'Category' %}:</b> 
        <br />
        {% if object.category.parent %}
        <a href="{{ object.category.parent.get_absolute_url }}" title="{% trans "playlists for object.category" %} {{ object.category.parent }}">{{ object.category.parent }}</a>
        â†’ 
        {% endif %}
        <a href="{{ object.category.get_absolute_url }}" title="{% trans "playlists for object.category" %} {{ object.category }}">{{ object.category }}</a>
    </div>
</div>
<div class="clear"></div>
<div class="sep"></div>

{% endblock %}
